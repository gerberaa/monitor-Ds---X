# üîÑ –ó–º—ñ–Ω–∏ –≤ —Å–∏—Å—Ç–µ–º—ñ –ø–µ—Ä–µ—Å–∏–ª–∞–Ω–Ω—è - Thread'–∏ –∑–∞–º—ñ—Å—Ç—å –∫–∞–Ω–∞–ª—ñ–≤

## ‚úÖ –©–æ –±—É–ª–æ –∑—Ä–æ–±–ª–µ–Ω–æ

### 1. üßµ –î–æ–¥–∞–Ω–∞ –ø—ñ–¥—Ç—Ä–∏–º–∫–∞ Thread'—ñ–≤ (–ì—ñ–ª–æ–∫)
- **–ù–æ–≤–∏–π —Ä–µ–∂–∏–º**: –ö–æ–∂–µ–Ω –ø—Ä–æ–µ–∫—Ç –º–∞—î —Å–≤–æ—é –≥—ñ–ª–∫—É –≤ –æ–¥–Ω—ñ–π –≥—Ä—É–ø—ñ
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è**: –ì—ñ–ª–∫–∏ —Å—Ç–≤–æ—Ä—é—é—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑ –Ω–∞–∑–≤–æ—é –ø—Ä–æ–µ–∫—Ç—É
- **–¢–µ–≥–∏ –≤ –≥—ñ–ª–∫–∞—Ö**: –ö–æ–∂–Ω–∞ –≥—ñ–ª–∫–∞ –º–∞—î —É–Ω—ñ–∫–∞–ª—å–Ω–∏–π —Ç–µ–≥ –ø—Ä–æ–µ–∫—Ç—É
- **–ó–≤–æ—Ä–æ—Ç–Ω–∞ —Å—É–º—ñ—Å–Ω—ñ—Å—Ç—å**: –°—Ç–∞—Ä–∏–π —Ä–µ–∂–∏–º –∑ —Ç–µ–≥–∞–º–∏ –≤ –∫–∞–Ω–∞–ª—ñ –∑–∞–ª–∏—à–∏–≤—Å—è

### 2. üìä –û–Ω–æ–≤–ª–µ–Ω–∞ –±–∞–∑–∞ –¥–∞–Ω–∏—Ö
**project_manager.py:**
- –î–æ–¥–∞–Ω–æ –ø–æ–ª–µ `tag` –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç—É
- –î–æ–¥–∞–Ω–æ `use_threads` –≤ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø–µ—Ä–µ—Å–∏–ª–∞–Ω–Ω—è  
- –î–æ–¥–∞–Ω–æ `project_threads` –¥–ª—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è ID –≥—ñ–ª–æ–∫
- –§—É–Ω–∫—Ü—ñ—ó: `set_project_thread()`, `get_project_thread()`, `remove_project_thread()`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è —Ç–µ–≥—ñ–≤: `_generate_project_tag()`

### 3. ü§ñ –ù–æ–≤—ñ —Ñ—É–Ω–∫—Ü—ñ—ó –≤ bot.py
**–°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–∞ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è Thread'–∞–º–∏:**
- `create_project_thread()` - —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –≥—ñ–ª–∫–∏ —á–µ—Ä–µ–∑ Telegram API
- `send_message_to_thread()` - –≤—ñ–¥–ø—Ä–∞–≤–∫–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤ –≥—ñ–ª–∫—É –∑ —Ç–µ–≥–æ–º
- `send_photo_to_thread()` - –≤—ñ–¥–ø—Ä–∞–≤–∫–∞ —Ñ–æ—Ç–æ –≤ –≥—ñ–ª–∫—É –∑ —Ç–µ–≥–æ–º

**–û–Ω–æ–≤–ª–µ–Ω—ñ –æ–±—Ä–æ–±–Ω–∏–∫–∏:**
- `handle_discord_notifications_sync()` - –ø—ñ–¥—Ç—Ä–∏–º–∫–∞ –≥—ñ–ª–æ–∫ –¥–ª—è Discord
- `handle_twitter_notifications_sync()` - –ø—ñ–¥—Ç—Ä–∏–º–∫–∞ –≥—ñ–ª–æ–∫ –¥–ª—è Twitter
- `get_users_tracking_twitter()` - –ø–æ–≤–µ—Ä—Ç–∞—î –¥–∞–Ω—ñ –ø—Ä–æ–µ–∫—Ç—ñ–≤ –∑–∞–º—ñ—Å—Ç—å —Ç—ñ–ª—å–∫–∏ user_id
- `get_users_tracking_discord_channel()` - –ø–æ–≤–µ—Ä—Ç–∞—î –¥–∞–Ω—ñ –ø—Ä–æ–µ–∫—Ç—ñ–≤ –∑–∞–º—ñ—Å—Ç—å —Ç—ñ–ª—å–∫–∏ user_id

### 4. üéõÔ∏è –ù–æ–≤–∏–π —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è
**–ö–Ω–æ–ø–∫–∏ –≤ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è—Ö –ø–µ—Ä–µ—Å–∏–ª–∞–Ω–Ω—è:**
- `üßµ –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –≥—ñ–ª–∫–∏` / `üßµ –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —Ç–µ–≥–∏` - –ø–µ—Ä–µ–º–∏–∫–∞–Ω–Ω—è —Ä–µ–∂–∏–º—ñ–≤
- `üß™ –¢–µ—Å—Ç –≥—ñ–ª–æ–∫` - —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –≤—Å—ñ—Ö –≥—ñ–ª–æ–∫ –ø—Ä–æ–µ–∫—Ç—ñ–≤
- `üîß –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –≥—ñ–ª–∫–∞–º–∏` - –¥–µ—Ç–∞–ª—å–Ω–µ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –≥—ñ–ª–∫–∞–º–∏

**–§—É–Ω–∫—Ü—ñ—ó —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –≥—ñ–ª–∫–∞–º–∏:**
- `üîÑ –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –≤—Å–µ –≥—ñ–ª–∫–∏` - –≤–∏–¥–∞–ª–∏—Ç–∏ —Ç–∞ —Å—Ç–≤–æ—Ä–∏—Ç–∏ –∑–∞–Ω–æ–≤–æ –≤—Å—ñ –≥—ñ–ª–∫–∏
- `üßπ –û—á–∏—Å—Ç–∏—Ç–∏ –Ω–µ–∞–∫—Ç–∏–≤–Ω—ñ` - –≤–∏–¥–∞–ª–∏—Ç–∏ –≥—ñ–ª–∫–∏ –≤–∏–¥–∞–ª–µ–Ω–∏—Ö –ø—Ä–æ–µ–∫—Ç—ñ–≤

**–ù–æ–≤—ñ –∫–æ–º–∞–Ω–¥–∏:**
- `/thread_test [project_id]` - —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç—É
- `/forward_test` - –æ–Ω–æ–≤–ª–µ–Ω–∏–π –∑ –ø—ñ–¥—Ç—Ä–∏–º–∫–æ—é –≥—ñ–ª–æ–∫

## üèóÔ∏è –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ —Ä—ñ—à–µ–Ω–Ω—è

### –î–æ –∑–º—ñ–Ω:
```
User 1 ‚Üí Project A ‚Üí Channel A
User 1 ‚Üí Project B ‚Üí Channel B  
User 2 ‚Üí Project C ‚Üí Channel C
```

### –ü—ñ—Å–ª—è –∑–º—ñ–Ω:
```
User 1 ‚Üí Project A (#tag_a) ‚Üí Group ‚Üí Thread A
User 1 ‚Üí Project B (#tag_b) ‚Üí Group ‚Üí Thread B
User 2 ‚Üí Project C (#tag_c) ‚Üí Group ‚Üí Thread C
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–∏—Ö:
```json
{
  "forward_settings": {
    "user_id": {
      "channel_id": "-1001234567890",
      "enabled": true,
      "use_threads": true,
      "project_threads": {
        "1": 123456,  // project_id -> thread_id
        "2": 789012,
        "3": 456789
      }
    }
  }
}
```

## üîß –¢–µ—Ö–Ω—ñ—á–Ω—ñ –¥–µ—Ç–∞–ª—ñ

### 1. –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è —Ç–µ–≥—ñ–≤ –ø—Ä–æ–µ–∫—Ç—ñ–≤:
```python
def _generate_project_tag(self, project_data: Dict) -> str:
    platform = project_data.get('platform', 'unknown')
    name = project_data.get('name', 'project')
    
    if platform == 'twitter':
        username = extract_username_from_url(project_data.get('url'))
        return f"#tw_{username[:8]}"
    elif platform == 'discord':
        return f"#ds_{clean_name[:10]}"
```

### 2. –°—Ç–≤–æ—Ä–µ–Ω–Ω—è Thread'–∞:
```python
async def create_project_thread(bot_token, chat_id, project_name, project_tag):
    url = f"https://api.telegram.org/bot{bot_token}/createForumTopic"
    data = {
        'chat_id': chat_id,
        'name': f"{project_tag} {project_name}",
        'icon_color': 0x6FB9F0
    }
    # ... –≤—ñ–¥–ø—Ä–∞–≤–∫–∞ –∑–∞–ø–∏—Ç—É
```

### 3. –í—ñ–¥–ø—Ä–∞–≤–∫–∞ –≤ Thread:
```python
async def send_message_to_thread(bot_token, chat_id, thread_id, text, project_tag):
    tagged_text = f"{project_tag}\n\n{text}"
    
    data = {
        'chat_id': chat_id,
        'message_thread_id': thread_id,
        'text': tagged_text,
        'parse_mode': 'Markdown'
    }
    # ... –≤—ñ–¥–ø—Ä–∞–≤–∫–∞ –∑–∞–ø–∏—Ç—É
```

## üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è:
1. –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø—Ä–æ–µ–∫—Ç—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≥–µ–Ω–µ—Ä—É—î —Ç–µ–≥
2. –ü–µ—Ä—à–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è —Å—Ç–≤–æ—Ä—é—î –≥—ñ–ª–∫—É
3. –ù–∞—Å—Ç—É–ø–Ω—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å —ñ—Å–Ω—É—é—á—É –≥—ñ–ª–∫—É

### –†—É—á–Ω–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è:
```bash
# –¢–µ—Å—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç—É
/thread_test 1

# –ó–∞–≥–∞–ª—å–Ω–∏–π —Ç–µ—Å—Ç –ø–µ—Ä–µ—Å–∏–ª–∞–Ω–Ω—è  
/forward_test

# –ß–µ—Ä–µ–∑ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å
üì¢ –ü–µ—Ä–µ—Å–∏–ª–∞–Ω–Ω—è ‚Üí üß™ –¢–µ—Å—Ç –≥—ñ–ª–æ–∫
```

## üìä –ü–µ—Ä–µ–≤–∞–≥–∏ –Ω–æ–≤–æ–≥–æ –ø—ñ–¥—Ö–æ–¥—É

### ‚úÖ –î–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤:
- **–û—Ä–≥–∞–Ω—ñ–∑–∞—Ü—ñ—è**: –ö–æ–∂–µ–Ω –ø—Ä–æ–µ–∫—Ç –≤ –æ–∫—Ä–µ–º—ñ–π –≥—ñ–ª—Ü—ñ
- **–ù–∞–≤—ñ–≥–∞—Ü—ñ—è**: –õ–µ–≥–∫–æ –∑–Ω–∞—Ö–æ–¥–∏—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ–µ–∫—Ç—É
- **–ß–∏—Å—Ç–æ—Ç–∞**: –ù–µ–º–∞—î –∑–º—ñ—à—É–≤–∞–Ω–Ω—è –ø—Ä–æ–µ–∫—Ç—ñ–≤
- **–ì–Ω—É—á–∫—ñ—Å—Ç—å**: –ú–æ–∂–Ω–∞ –ø–µ—Ä–µ–º–∏–∫–∞—Ç–∏ –º—ñ–∂ —Ä–µ–∂–∏–º–∞–º–∏

### ‚úÖ –î–ª—è –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä—ñ–≤:
- **–ú–∞—Å—à—Ç–∞–±–æ–≤–∞–Ω—ñ—Å—Ç—å**: –û–¥–∏–Ω –∫–∞–Ω–∞–ª –∑–∞–º—ñ—Å—Ç—å –±–∞–≥–∞—Ç—å–æ—Ö
- **–£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è**: –¶–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–µ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –≥—ñ–ª–∫–∞–º–∏  
- **–ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥**: –õ–µ–≥—à–µ –≤—ñ–¥—Å—Ç–µ–∂—É–≤–∞—Ç–∏ –∞–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å
- **–ï–∫–æ–Ω–æ–º—ñ—è**: –ú–µ–Ω—à–µ –∫–∞–Ω–∞–ª—ñ–≤ = –º–µ–Ω—à–µ —Ä–µ—Å—É—Ä—Å—ñ–≤

### ‚úÖ –¢–µ—Ö–Ω—ñ—á–Ω—ñ –ø–µ—Ä–µ–≤–∞–≥–∏:
- **API –ª—ñ–º—ñ—Ç–∏**: –ú–µ–Ω—à–µ –∑–∞–ø–∏—Ç—ñ–≤ –Ω–∞ —Ä—ñ–∑–Ω—ñ –∫–∞–Ω–∞–ª–∏
- **–°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è**: –í—Å–µ –≤ –æ–¥–Ω–æ–º—É –º—ñ—Å—Ü—ñ
- **–ë–µ–∫–∞–ø–∏**: –ü—Ä–æ—Å—Ç—ñ—à–µ —Ä–æ–±–∏—Ç–∏ —Ä–µ–∑–µ—Ä–≤–Ω—ñ –∫–æ–ø—ñ—ó
- **–õ–æ–≥—É–≤–∞–Ω–Ω—è**: –¶–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ –ª–æ–≥–∏

## üîÑ –ú—ñ–≥—Ä–∞—Ü—ñ—è

### –Ü—Å–Ω—É—é—á—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ:
1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ**: –ó–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è —Å—Ç–∞—Ä—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∫–∞–Ω–∞–ª—ñ–≤
2. **–ó–∞ –≤–∏–±–æ—Ä–æ–º**: –ú–æ–∂–Ω–∞ –ø–µ—Ä–µ–º–∫–Ω—É—Ç–∏—Å—è –Ω–∞ –≥—ñ–ª–∫–∏ —á–µ—Ä–µ–∑ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å
3. **–ë–µ–∑–ø–µ—á–Ω–æ**: –°—Ç–∞—Ä—ñ –∫–∞–Ω–∞–ª–∏ –ø—Ä–æ–¥–æ–≤–∂—É—é—Ç—å –ø—Ä–∞—Ü—é–≤–∞—Ç–∏

### –ù–æ–≤—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ:
1. **–ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º**: –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å –≥—ñ–ª–∫–∏
2. **–ì–∞–π–¥**: –ü–æ–∫—Ä–æ–∫–æ–≤–∏–π –ø–æ—Å—ñ–±–Ω–∏–∫ –∑ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
3. **–ü—ñ–¥—Ç—Ä–∏–º–∫–∞**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ –ø—ñ–¥–∫–∞–∑–∫–∏ —Ç–∞ –ø–æ–º–∏–ª–∫–∏

## üöÄ –ú–∞–π–±—É—Ç–Ω—ñ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è

### –ü–ª–∞–Ω—É—î—Ç—å—Å—è:
- üî∏ **–®–∞–±–ª–æ–Ω–∏ –≥—ñ–ª–æ–∫**: –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Ñ–æ—Ä–º–∞—Ç—É –Ω–∞–∑–≤ –≥—ñ–ª–æ–∫
- üî∏ **–Ü–∫–æ–Ω–∫–∏ –≥—ñ–ª–æ–∫**: –†—ñ–∑–Ω—ñ —ñ–∫–æ–Ω–∫–∏ –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º  
- üî∏ **–ê–≤—Ç–æ-–∞—Ä—Ö—ñ–≤—É–≤–∞–Ω–Ω—è**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –∞—Ä—Ö—ñ–≤—É–≤–∞–Ω–Ω—è —Å—Ç–∞—Ä–∏—Ö –≥—ñ–ª–æ–∫
- üî∏ **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≥—ñ–ª–æ–∫**: –ê–Ω–∞–ª—ñ—Ç–∏–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ –ø–æ –≥—ñ–ª–∫–∞—Ö
- üî∏ **–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø—É**: –†—ñ–∑–Ω—ñ –ø—Ä–∞–≤–∞ –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö –≥—ñ–ª–æ–∫
- üî∏ **–Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ –±–æ—Ç–∞–º–∏**: API –¥–ª—è —ñ–Ω—à–∏—Ö –±–æ—Ç—ñ–≤

### –ú–æ–∂–ª–∏–≤—ñ —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è:
- üì± **–ú–æ–±—ñ–ª—å–Ω–∏–π —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å**: –ó—Ä—É—á–Ω–µ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∑ —Ç–µ–ª–µ—Ñ–æ–Ω—É
- üåê **Web –ø–∞–Ω–µ–ª—å**: –í–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è
- üìä **–ê–Ω–∞–ª—ñ—Ç–∏–∫–∞**: –î–µ—Ç–∞–ª—å–Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –≥—ñ–ª–∫–∞—Ö
- üîî **–†–æ–∑—É–º–Ω—ñ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è**: –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Å–ø–æ–≤—ñ—â–µ–Ω—å –ø–æ –≥—ñ–ª–∫–∞—Ö

---

**–†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ: Thread'–∏ + —Ç–µ–≥–∏ –¥–ª—è –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—ó –æ—Ä–≥–∞–Ω—ñ–∑–∞—Ü—ñ—ó –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É —Å–æ—Ü—ñ–∞–ª—å–Ω–∏—Ö –º–µ—Ä–µ–∂**  
**–í–µ—Ä—Å—ñ—è: 2.1**  
**–î–∞—Ç–∞: –ñ–æ–≤—Ç–µ–Ω—å 2025**